(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,o=window.React,l=window.wp.primitives,r=(0,o.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(l.Path,{d:"M16.375 4.5H4.625a.125.125 0 0 0-.125.125v8.254l2.859-1.54a.75.75 0 0 1 .68-.016l2.384 1.142 2.89-2.074a.75.75 0 0 1 .874 0l2.313 1.66V4.625a.125.125 0 0 0-.125-.125Zm.125 9.398-2.75-1.975-2.813 2.02a.75.75 0 0 1-.76.067l-2.444-1.17L4.5 14.583v1.792c0 .069.056.125.125.125h11.75a.125.125 0 0 0 .125-.125v-2.477ZM4.625 3C3.728 3 3 3.728 3 4.625v11.75C3 17.273 3.728 18 4.625 18h11.75c.898 0 1.625-.727 1.625-1.625V4.625C18 3.728 17.273 3 16.375 3H4.625ZM20 8v11c0 .69-.31 1-.999 1H6v1.5h13.001c1.52 0 2.499-.982 2.499-2.5V8H20Z",fillRule:"evenodd",clipRule:"evenodd"})),a=window.wp.hooks,i=window.wp.compose,s=window.wp.components,c=window.wp.element,n=window.wp.data,d=window.wp.i18n,p=JSON.parse('{"apiVersion":3,"name":"stretchypants/grid-gallery","title":"Stretchy Pants Grid Gallery","description":"A responsive grid gallery with lightbox support","category":"media","icon":"grid-view","keywords":["gallery","grid","images","video"],"textdomain":"stretchy-pants-grid-gallery","supports":{"align":["wide","full"],"html":false},"attributes":{"focalPoints":{"type":"object","default":{}}},"editorScript":"file:../build/editor.js","editorStyle":"file:../build/editor-styles.css","viewScript":"file:../build/frontend.js"}'),g=window.ReactJSXRuntime;(0,e.registerBlockType)("stretchypants/grid-gallery",{...p,icon:r,edit:()=>{const e=(0,t.useBlockProps)(),o=window.spGridGalleryVars?.pluginUrl.replace(/\/?$/,"/"),l=(0,t.useInnerBlocksProps)(e,{allowedBlocks:["core/image","core/video"],template:[["core/video",{src:`${o}assets/placeholder.mp4`,autoplay:!0,controls:!1,loop:!0,muted:!0,playsInline:!0}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}],["core/image",{url:`${o}assets/placeholder.jpg`,alt:"Placeholder image"}]],templateLock:!1,max:6});return(0,g.jsx)("div",{...l})},save:()=>{const e=t.useBlockProps.save();return(0,g.jsx)("div",{...e,children:(0,g.jsx)(t.InnerBlocks.Content,{})})}}),(0,a.addFilter)("blocks.registerBlockType","stretchypants/image-focal-point-attribute",((e,t)=>"core/image"!==t?e:{...e,attributes:{...e.attributes,focalPoint:{type:"object",default:{x:.5,y:.5}}}})),(0,a.addFilter)("editor.BlockEdit","stretchypants/with-focal-point-picker",(0,i.createHigherOrderComponent)((e=>o=>{if("core/image"!==o.name)return(0,g.jsx)(e,{...o});const{getBlockParents:l,getBlockName:r}=(0,n.useSelect)((e=>({getBlockParents:e("core/block-editor").getBlockParents,getBlockName:e("core/block-editor").getBlockName})),[]);if(!(o.clientId?l(o.clientId):[]).some((e=>"stretchypants/grid-gallery"===r(e))))return(0,g.jsx)(e,{...o});const[a,i]=(0,c.useState)({x:o.attributes.focalPoint?.x||.5,y:o.attributes.focalPoint?.y||.5}),p=e=>{i(e),o.setAttributes({focalPoint:e})},m=o.attributes?.url||o.attributes?.src;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(e,{...o}),(0,g.jsx)(t.InspectorControls,{children:(0,g.jsx)("div",{style:{padding:"0 16px 16px"},children:m&&(0,g.jsx)(s.FocalPointPicker,{__nextHasNoMarginBottom:!0,label:(0,d.__)("Focal Point"),url:m,value:a,onDragStart:p,onDrag:p,onChange:p})})})]})}),"withFocalPointPicker")),(0,a.addFilter)("blocks.getSaveElement","stretchypants/apply-focal-point",((e,t,o)=>"core/image"!==t.name||!o?.focalPoint||.5===o.focalPoint.x&&.5===o.focalPoint.y?e:(0,c.cloneElement)(e,{...e.props,style:{"--object-position":`${100*o.focalPoint.x}% ${100*o.focalPoint.y}%`}}))),(0,a.addFilter)("editor.BlockListBlock","stretchypants/with-focal-point-styles",(0,i.createHigherOrderComponent)((e=>t=>{if("core/image"!==t.name)return(0,g.jsx)(e,{...t});if(!t.attributes?.focalPoint||.5===t.attributes.focalPoint.x&&.5===t.attributes.focalPoint.y)return(0,g.jsx)(e,{...t});const o={"--object-position":`${100*t.attributes.focalPoint.x}% ${100*t.attributes.focalPoint.y}%`};return(0,g.jsx)(e,{...t,wrapperProps:{style:o}})}),"withFocalPointStyles"))})();